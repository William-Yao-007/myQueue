#include "queue.h"
//-----------------------------------------------------------------------------
// declare
//-----------------------------------------------------------------------------
void init_queue(QUEUE_T *qp);
char is_empty(QUEUE_T *qp);
char is_full(QUEUE_T *qp);
char enqueue(QUEUE_T *qp, char data);
char dequeue(QUEUE_T *qp, char *data);

//=============================================================================
//=============================================================================
void init_queue(QUEUE_T *qp)
{
    qp->front = 0;
    qp->rear = 0;
    qp->size = 0;
}

//=============================================================================
//=============================================================================
char enqueue(QUEUE_T *qp, char data)
{
    if(is_full(qp)) {
        return -1;
    }

    qp->data[qp->rear] = data;
    qp->rear = (qp->rear + 1) % QUEUE_MAX_SIZE;
    qp->size++;
    return 0;
}

//=============================================================================
//=============================================================================
char dequeue(QUEUE_T *qp, char *data)
{
    if(is_empty(qp)) {
        return -1;
    }

    *data = qp->data[qp->front];
    qp->front = (qp->front + 1) % QUEUE_MAX_SIZE;
    qp->size--;
    return 0;    
}

//=============================================================================
//=============================================================================
char is_empty(QUEUE_T *qp)
{
    return (0 == qp->size);
}

//=============================================================================
//=============================================================================
char is_full(QUEUE_T *qp)
{
    return (QUEUE_MAX_SIZE == qp->size);
}
